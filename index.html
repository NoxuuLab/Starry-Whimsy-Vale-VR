<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winter Night Scene</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
    <script src="star.js"></script>
</head>
<body>  
    <a-scene post-processing="enabled: true">
        <a-entity position="0 2.25 -15" particle-system="preset: rain"></a-entity>
        <a-assets>
            <!-- Load background image and ground -->
            <img id="background"  alt="starry-night" src="assets/background.jpg">
            <img id="snow" alt="snow" src="assets/snow_texture.jpg">
            <img id="snowing" alt="snowing" src="assets/snow.gif">
            <a-asset-item id="shootingStarModel" src="assets/sun.glb"></a-asset-item>
            
        </a-assets>
     
        <!-- Camera entity with vignette effect -->
        <a-entity camera look-controls position="0 0.8 0" vignette="boost: 10; reduction: 0.5;">
            <a-animation attribute="position" dur="5000" to="0 -5 -10" easing="linear" repeat="indefinite"></a-animation>
        </a-entity>

        <!-- Declare the shooting star model -->
        <a-entity shooting-stars >
        </a-entity>

        <!-- Add animated snow GIF -->
        <a-plane position="-2 1 -8" src="#snowing" material="shader: flat;" transparent="true" height="10" width="10">
            <!-- Animate the position of the snow plane -->
            <a-animation attribute="position" dur="5000" to="0 1 -12" easing="linear" repeat="indefinite"></a-animation>
        </a-plane>

        <!-- Sound for Trees (Leaves) -->
        <a-sound id="leaves"  src="assets/leaves.wav" position="0 0 -7" autoplay="false" loop="true" volume="0.5"></a-sound>

        <!-- Play a WAV Sound -->
        <a-sound src="assets/frogs_sound.wav" autoplay="true" loop="true" volume="0"></a-sound>

        <a-entity id="tree1" gltf-model="assets/toon_tree_02.glb" position="0 0 -7" rotation="0 110 0" scale="4 4 4">
            <!-- Interaction: Trigger Sound on Click -->
            <a-entity position="0 1.5 0">
                <!-- Invisible Hitbox -->
                <a-entity
                    geometry="primitive: box; depth: 1.5; height: 3; width: 1.5"
                    material="transparent: true; opacity: 0"
                    event-set__click="_target: #leaves; _action: play"
                ></a-entity>
        
                <!-- Visible Marker -->
                <a-box color="red" width="1.5" height="0.1" depth="1.5"></a-box>
            </a-entity>
        </a-entity>

        <a-entity id="house" gltf-model="assets/house_cat.glb" position="-4 1 -4" rotation="0 30 0" scale="20 20 20"></a-entity>

        <!-- GLB Models -->
        <a-entity gltf-model="assets/chinese_lamp.glb" scale="0.2 0.2 0.2" position="2 0 -8"></a-entity>
        <a-entity gltf-model="assets/chinese_lamp.glb" scale="0.2 0.2 0.2" position="-2 0 -8"></a-entity>
        <a-entity gltf-model="assets/chinese_lamp.glb" scale="0.2 0.2 0.2" position="-2 0 -5"></a-entity>

        <!-- Lights for Chinese Lamps -->
        <a-light type="point" position="2 1 -8" intensity="0.5" color="crimson"></a-light>
        <a-light type="point" position="-2 1 -8" intensity="0.5" color="#ffcc00"></a-light>
        <a-light type="point" position="-2 1 -5" intensity="0.5" color="#f0f"></a-light>

        <!-- Ambient Light for Dark Scene -->
        <a-light type="ambient" intensity="10" color="#000"></a-light>

        <!-- Spotlight for House -->
        <a-light type="spot" position="-4 1 -4" target="#house" intensity="5" angle="30" penumbra="20" color="#ffcc00"></a-light>

        <!-- Starry night sky background -->
        <a-sky src="#background" color="#111"></a-sky>

        <!-- Snow floor -->
        <!-- Add your snow floor if needed -->

    </a-scene>
</body>
</html>
