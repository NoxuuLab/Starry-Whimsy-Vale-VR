<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Reality Scene</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
    <script src="https://rawgit.com/zcanter/aframe-gradient-sky/master/dist/gradientsky.min.js"></script>

    
    <script src="light-toggle.js"></script>

    <script>
        window.onload = function() {
            createRandomModels(10);
        };

        function createRandomModels(numberOfModels) {
    var scene = document.querySelector('a-scene'); 

    for (let i = 0; i < numberOfModels; i++) {
        var wrapper = document.createElement('a-entity');
        wrapper.setAttribute('position', getRandomPosition());
        wrapper.setAttribute('rotation', '0 0 0');

        var model = document.createElement('a-entity');
        model.setAttribute('gltf-model', '#jellyFish');
        model.setAttribute('scale', '0.5 0.5 0.5');

        // Append the model to the wrapper
        wrapper.appendChild(model);

        // Add animation to the wrapper
        wrapper.setAttribute('animation', `property: position; 
                                           to: 0 1 0; 
                                           dir: alternate; 
                                           dur: 2000; 
                                           easing: easeInOutSine; 
                                           loop: true`);

        scene.appendChild(wrapper);
    }
}


    
        function getRandomPosition() {
            // Maximum values
            var maxX = 20;
            var maxY = 5;
            var maxZ = -20;
    
            // Minimum values
            var minX = 5;
            var minY = 1;
            var minZ = -15;
    
            var randomX = Math.random() * (maxX - minX) + minX * (Math.random() < 0.5 ? -1 : 1);
            var randomY = Math.random() * (maxY - minY) + minY;
            var randomZ = Math.random() * (maxZ - minZ) + minZ * (Math.random() < 0.5 ? -1 : 1);
    
            return randomX + ' ' + randomY + ' ' + randomZ;
        }
    </script>
    
</head>
<body>
    <a-scene cursor="rayOrigin:mouse" fog="type: linear; color: #AAA">
        <!-- ASSETS -->
        <a-assets>
            <a-asset-item id="geisha" src="assets/main_scene/ghost-in-the-shell-geisha-mask/source/model.glb"></a-asset-item>
            <a-asset-item id="spooky" src="assets/spooky_thing.glb"></a-asset-item>
            <audio id="spookySound" src="assets/main_scene/cricket.mp3"></audio>
            <!-- Add your floating house model -->
            <a-asset-item id="jellyFish" src="/assets/main_scene/jellyfish.glb"></a-asset-item>
</a-assets>
        </a-assets>

        <!-- ENVIRONMENT -->
        <a-entity environment="
                fog: 0.7;
                groundColor: #100; 
                preset: dream; 
                groundTexture: none;
                grid: none;
                groundYScale: 60;
                dressing: none">
        </a-entity>

        <!-- CAMERA -->
        <a-entity id="rig">
            <a-entity camera look-controls position="0 1.6 0"></a-entity>
            <a-cursor raycaster="objects: .interactive"></a-cursor>
        </a-entity>

        <!-- LIGHTS -->
        <!-- Ambient light for the scene -->
        <a-light type="ambient" color="#888" intensity="0.2"></a-light>
    <!-- <a-entity geometry="primitive: sphere"
            material="shader: gradient; topColor: 255 100 100; bottomColor: 100 100 200; offset: 0.0001"
            position="-1 2.8 -4" >
        <a-sound src="#geisha-sound" autoplay="false" loop="true"></a-sound>
    <a-entity onclick="toggleSound('lampSound1')"></a-entity>
    </a-sphere>
    <a-light type="spot" position="3 5 3"  angle="45" penumbra="0.8" intensity="1"></a-light>
    
    <a-entity geometry="primitive: sphere"
        material="color: #00FF00; opacity: 0.6; side: double;  repeat: 2 2; roughness: 0.5;"
        position="-1 3 -7" >
    </a-entity> -->

    <!-- Add the floating house entity -->
     <a-entity>
<a-entity gltf-model="#spooky" position="0 1 -5" rotation="0 1 0" scale="0.3 0.3 0.3">
    <a-sound src="#spookySound" autoplay="false" loop="true"></a-sound>
</a-entity>




      <!-- JavaScript to create circles with radius lines -->
      <script>
        AFRAME.registerComponent('radius-lines', {
          init: function () {
            const numCircles = 5;  // Adjust the number of circles
            const radiusIncrement = 0.5;  // Adjust the radius increment between circles

            for (let i = 0; i < numCircles; i++) {
              const radius = i * radiusIncrement;

              // Create a ring entity (annular geometry)
              const ringEntity = document.createElement('a-ring');
              ringEntity.setAttribute('radius-inner', radius - 0.01);  // Adjust inner radius
              ringEntity.setAttribute('radius-outer', radius + 0.01);  // Adjust outer radius
              ringEntity.setAttribute('material', { color: '#00FF00', side: 'double' });

              // Position each ring along the y-axis
              ringEntity.setAttribute('position', `0 ${i * 0.2} 0`);

              // Append the ring entity to the scene
              this.el.appendChild(ringEntity);
            }
          }
        });
      </script>

    </a-scene>







    <script>
        function toggleSound(soundId) {
        var sound = document.getElementById(soundId);
        if (sound.readyState >= 2) { // Check if audio is loaded
            // Play or pause the sound based on its current state
            if (sound.paused) {
                sound.play();
            } else {
                sound.pause();
            }
        }
    }

    document.body.addEventListener('click', function() {
        toggleSound('spookySound');
    });
    </script>
  
</body>
</html>
