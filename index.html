<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Reality Scene</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
    <script src="https://rawgit.com/zcanter/aframe-gradient-sky/master/dist/gradientsky.min.js"></script>

    
    <script src="light-toggle.js"></script>

    <script>
function createRandomModels(numberOfModels) {
    var scene = document.querySelector('a-scene'); 

    for (let i = 0; i < numberOfModels; i++) {
        var wrapper = document.createElement('a-entity');
        wrapper.setAttribute('position', getRandomPosition());
        wrapper.setAttribute('rotation', '0 0 0');

        var model = document.createElement('a-entity');
        model.setAttribute('gltf-model', '#star-lantern');
        model.setAttribute('scale', '0.5 0.5 0.5');

        // Append the model to the wrapper
        wrapper.appendChild(model);

        // Add rotation animation to the wrapper
        wrapper.setAttribute('animation', `property: rotation; 
                                           to: 0 360 0; 
                                           loop: true; 
                                           dur: 5000; 
                                           easing: linear`);

        scene.appendChild(wrapper);
    }
}

        function getRandomPosition() {
            // Maximum values
            var maxX = 20;
            var maxY = 5;
            var maxZ = -20;
    
            // Minimum values
            var minX = 5;
            var minY = 1;
            var minZ = -15;
    
            var randomX = Math.random() * (maxX - minX) + minX * (Math.random() < 0.5 ? -1 : 1);
            var randomY = Math.random() * (maxY - minY) + minY;
            var randomZ = Math.random() * (maxZ - minZ) + minZ * (Math.random() < 0.5 ? -1 : 1);
    
            return randomX + ' ' + randomY + ' ' + randomZ;
        }
    </script>
    
</head>
<body>
    <a-scene cursor="rayOrigin:mouse" fog="type: linear; color: #AAA">
        <!-- ASSETS -->
        <a-assets>
            <a-asset-item id="spooky" src="assets/spooky_thing.glb"></a-asset-item>
            <a-asset-item id="dwarf-star" src="assets/main_scene/dwarf_star.glb"></a-asset-item>
            <a-asset-item id="star-cluster" src="assets/star_cluster.glb"></a-asset-item>
            <a-asset-item id="star-latern" src="assets/star_lantern.glb"></a-asset-item>
            <audio id="spookySound" src="assets/growl.wav"></audio>
            <audio id="backgroundMusic" src="assets/main_scene/cricket.mp3"></audio>
            <a-asset-item id="cloud" src="assets/cloud.glb"></a-asset-item>
</a-assets>
        </a-assets>

        <!-- ENVIRONMENT -->
        <a-entity environment="
                fog: 0.7;
                groundColor: #100; 
                preset: dream; 
                groundTexture: none;
                grid: none;
                groundYScale: 60;
                dressing: none">
        </a-entity>

        <!-- CAMERA -->
        <a-entity id="rig">
            <a-entity camera look-controls position="0 1.6 0"></a-entity>
            <a-cursor raycaster="objects: .interactive"></a-cursor>
        </a-entity>

         <!-- Background Sound -->
        <a-sound src="#backgroundMusic" autoplay="true" loop="true" position="0 0 0"></a-sound>


        <!-- LIGHTS -->
        <!-- Ambient light for the scene -->
        <a-light type="ambient" color="#888" intensity="0.2"></a-light>
        <a-light type="spot" position="3 5 3"  angle="45" penumbra="0.8" intensity="1"></a-light>
  

    <!-- The small monster roaring entity -->
<a-entity gltf-model="#spooky" position="0 1 -5" rotation="0 1 0" scale="0.3 0.3 0.3">
    <a-sound src="#spookySound" autoplay="false" loop="true"></a-sound>
</a-entity>
<!-- The star cluster -->
<a-entity gltf-model="#star-cluster" position="-2 4 -5" scale="2 2 2"></a-entity>
<a-entity gltf-model="#star-cluster" position="5 4 -5" scale="2 2 2"></a-entity>
<a-entity gltf-model="#dwarf-star" position="2 6 -10" scale="1 1 1"></a-entity>
<a-entity gltf-model="#star-latern" position="2 6 -10" scale="1 1 1"></a-entity>


      <!-- JavaScript to create circles with radius lines -->
      <script>
        AFRAME.registerComponent('radius-lines', {
          init: function () {
            const numCircles = 5;  // Adjust the number of circles
            const radiusIncrement = 0.5;  // Adjust the radius increment between circles

            for (let i = 0; i < numCircles; i++) {
              const radius = i * radiusIncrement;

              // Create a ring entity (annular geometry)
              const ringEntity = document.createElement('a-ring');
              ringEntity.setAttribute('radius-inner', radius - 0.01);  // Adjust inner radius
              ringEntity.setAttribute('radius-outer', radius + 0.01);  // Adjust outer radius
              ringEntity.setAttribute('material', { color: '#00FF00', side: 'double' });

              // Position each ring along the y-axis
              ringEntity.setAttribute('position', `0 ${i * 0.2} 0`);

              // Append the ring entity to the scene
              this.el.appendChild(ringEntity);
            }
          }
        });
      </script>

    </a-scene>







    <script>
        function toggleSound(soundId) {
        var sound = document.getElementById(soundId);
        if (sound.readyState >= 2) { // Check if audio is loaded
            // Play or pause the sound based on its current state
            if (sound.paused) {
                sound.play();
            } else {
                sound.pause();
            }
        }
    }

    document.body.addEventListener('click', function() {
        toggleSound('spookySound');
    });
    </script>
  
</body>
</html>
